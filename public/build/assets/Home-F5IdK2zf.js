import{a as S,c as i,o,d as e,e as v,t as c,F as p,f as k,m as C,r as V,n as h,z as M,b,w as f,j as w,h as L,v as A,l as H,k as B,g as N}from"./app-UnyQy-k-.js";const O=["value"],P={__name:"CategoryOption",props:{category:{type:Object,required:!0},level:{type:Number,default:0}},setup(l){const y=a=>"  ".repeat(a)+(a>0?"→ ":""),n=a=>a.children_recursive||a.childrenRecursive||[];return(a,$)=>{const m=S("CategoryOption",!0);return o(),i(p,null,[e("option",{value:l.category.id},c(y(l.level))+c(l.category.name),9,O),n(l.category).length>0?(o(!0),i(p,{key:0},k(n(l.category),x=>(o(),C(m,{key:x.id,category:x,level:l.level+1},null,8,["category","level"]))),128)):v("",!0)],64)}}},T={class:"bg-white rounded-lg shadow-sm p-4"},U={class:"space-y-1"},D={class:"flex items-center"},F=["onClick"],R=["onClick"],q={key:0,class:"ml-6 mt-1 space-y-1"},z={class:"flex items-center"},E=["onClick"],Y=["onClick"],G={key:0,class:"ml-6 mt-1 space-y-1"},J=["onClick"],K={__name:"CategorySidebar",props:{categories:{type:Array,required:!0},selectedCategory:{type:[String,Number],default:""}},emits:["select-category"],setup(l,{emit:y}){const n=y,a=V(new Set),$=u=>{a.value.has(u)?a.value.delete(u):a.value.add(u)},m=u=>{n("select-category",u)},x=u=>(u.children_recursive||u.childrenRecursive||u.children||[]).length>0,j=u=>u.children_recursive||u.childrenRecursive||u.children||[];return(u,r)=>(o(),i("div",T,[r[3]||(r[3]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Categories",-1)),e("div",U,[e("button",{onClick:r[0]||(r[0]=t=>m("")),class:h(["w-full text-left px-3 py-2 rounded text-sm font-medium transition",l.selectedCategory===""?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"])}," All Categories ",2),(o(!0),i(p,null,k(l.categories,t=>(o(),i("div",{key:t.id},[e("div",D,[x(t)?(o(),i("button",{key:0,onClick:d=>$(t.id),class:"p-2 hover:bg-gray-100 rounded"},[(o(),i("svg",{class:h(["w-4 h-4 text-gray-500 transition-transform",{"rotate-90":a.value.has(t.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[1]||(r[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,F)):v("",!0),e("button",{onClick:d=>m(t.id),class:h(["flex-1 text-left px-3 py-2 rounded text-sm font-medium transition",l.selectedCategory==t.id?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50",x(t)?"":"ml-10"])},c(t.name),11,R)]),x(t)&&a.value.has(t.id)?(o(),i("div",q,[(o(!0),i(p,null,k(j(t),d=>(o(),i("div",{key:d.id},[e("div",z,[x(d)?(o(),i("button",{key:0,onClick:g=>$(d.id),class:"p-2 hover:bg-gray-100 rounded"},[(o(),i("svg",{class:h(["w-4 h-4 text-gray-500 transition-transform",{"rotate-90":a.value.has(d.id)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[2]||(r[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,E)):v("",!0),e("button",{onClick:g=>m(d.id),class:h(["flex-1 text-left px-3 py-2 rounded text-sm transition",l.selectedCategory==d.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50",x(d)?"":"ml-10"])},c(d.name),11,Y)]),x(d)&&a.value.has(d.id)?(o(),i("div",G,[(o(!0),i(p,null,k(j(d),g=>(o(),i("button",{key:g.id,onClick:s=>m(g.id),class:h(["w-full text-left px-3 py-2 rounded text-sm transition ml-10",l.selectedCategory==g.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"])},c(g.name),11,J))),128))])):v("",!0)]))),128))])):v("",!0)]))),128))])]))}},Q={class:"min-h-screen bg-gray-50"},W={class:"bg-white shadow"},X={class:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8"},Z={class:"flex items-center justify-between"},I={class:"flex items-center gap-4"},ee={class:"bg-white border-b"},te={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},se={class:"space-y-4"},oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},re={class:"flex flex-wrap gap-4 items-end"},ie={class:"flex-1 min-w-[200px]"},ne={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},le={class:"flex gap-8"},ae={class:"hidden lg:block w-64 flex-shrink-0"},de={class:"flex-1"},ue={key:0,class:"space-y-6"},ge={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},ce={class:"aspect-h-3 aspect-w-4 relative overflow-hidden bg-gray-200"},me=["src","alt"],xe={key:1,class:"flex h-48 w-full items-center justify-center bg-gray-200"},pe={class:"p-4"},ye={class:"mb-2 flex items-center gap-2"},fe={class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},he={class:"mb-2 text-lg font-semibold text-gray-900 group-hover:text-indigo-600"},ve={class:"mb-3 line-clamp-2 text-sm text-gray-600"},be={class:"flex items-center justify-between"},we={class:"text-2xl font-bold text-indigo-600"},ke={class:"text-sm text-gray-500"},_e={key:0,class:"px-4 pb-3 flex gap-2 border-t pt-2"},Ce=["onClick"],$e={key:0,class:"mt-8 flex justify-center"},Le={class:"inline-flex rounded-md shadow-sm -space-x-px"},je={key:1,class:"rounded-lg bg-white p-12 text-center shadow-sm"},Ae={class:"mt-6"},Se={class:"mt-12 border-t border-gray-200 bg-white"},Me={class:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"},Be={class:"text-center text-sm text-gray-500"},Ne={__name:"Home",props:{listings:{type:Object,required:!0},categories:{type:Array,required:!0},filters:{type:Object,default:()=>({})}},setup(l){const y=l,n=V({search:y.filters.search||"",category:y.filters.category||"",location:y.filters.location||"",min_price:y.filters.min_price||"",max_price:y.filters.max_price||""});let a=null;const $=()=>{clearTimeout(a),a=setTimeout(()=>{m()},500)},m=()=>{const r=Object.fromEntries(Object.entries(n.value).filter(([t,d])=>d!==""));B.get("/",r,{preserveState:!0,preserveScroll:!0})};M(()=>({category:n.value.category,location:n.value.location,min_price:n.value.min_price,max_price:n.value.max_price}),()=>{m()},{deep:!0}),M(()=>n.value.search,r=>{(r.length===0||r.length>=3)&&$()});const x=()=>{n.value={search:"",category:"",location:"",min_price:"",max_price:""},m()},j=r=>{confirm("Are you sure you want to delete this listing?")&&B.delete(route("listings.destroy",r),{preserveScroll:!0})},u=r=>{n.value.category=r,m()};return(r,t)=>{const d=S("Head"),g=S("Link");return o(),i(p,null,[b(d,{title:"PopArt Listings"}),e("div",Q,[e("header",W,[e("div",X,[e("div",Z,[t[9]||(t[9]=e("div",{class:"flex items-center"},[e("h1",{class:"text-2xl font-bold text-indigo-600"},"PopArt Listings")],-1)),e("nav",I,[r.$page.props.auth.user?(o(),i(p,{key:0},[b(g,{href:r.route("profile.listings"),class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},{default:f(()=>[...t[5]||(t[5]=[w(" My Listings ",-1)])]),_:1},8,["href"]),r.$page.props.auth.user.is_admin?(o(),C(g,{key:0,href:r.route("admin.dashboard"),class:"rounded-md bg-gray-800 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700"},{default:f(()=>[...t[6]||(t[6]=[w(" Dashboard ",-1)])]),_:1},8,["href"])):v("",!0)],64)):(o(),i(p,{key:1},[b(g,{href:r.route("login"),class:"rounded-md px-3 py-2 text-sm font-semibold text-gray-900 hover:text-indigo-600"},{default:f(()=>[...t[7]||(t[7]=[w(" Log in ",-1)])]),_:1},8,["href"]),b(g,{href:r.route("register"),class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},{default:f(()=>[...t[8]||(t[8]=[w(" Register ",-1)])]),_:1},8,["href"])],64))])])])]),e("section",ee,[e("div",te,[e("div",se,[e("div",oe,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.search=s),type:"text",placeholder:"Search listings (min 3 characters)...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[A,n.value.search]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),L(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.location=s),type:"text",placeholder:"City or area...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[A,n.value.location]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Min Price",-1)),L(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.min_price=s),type:"number",placeholder:"0",min:"0",step:"0.01",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[A,n.value.min_price]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Max Price",-1)),L(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.max_price=s),type:"number",placeholder:"10000",min:"0",step:"0.01",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[A,n.value.max_price]])])]),e("div",re,[e("div",ie,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),L(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.category=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[14]||(t[14]=e("option",{value:""},"All Categories",-1)),(o(!0),i(p,null,k(l.categories,s=>(o(),C(P,{key:s.id,category:s,level:0},null,8,["category"]))),128))],512),[[H,n.value.category]])]),e("button",{onClick:x,class:"rounded-md bg-gray-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500"}," Clear Filters ")])])])]),e("main",ne,[e("div",le,[e("aside",ae,[b(K,{categories:l.categories,"selected-category":n.value.category,onSelectCategory:u},null,8,["categories","selected-category"])]),e("div",de,[t[23]||(t[23]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-gray-900"},"Latest Listings"),e("p",{class:"mt-2 text-gray-600"},"Browse through our collection of active listings")],-1)),l.listings.data.length>0?(o(),i("div",ue,[e("div",ge,[(o(!0),i(p,null,k(l.listings.data,s=>{var _;return o(),i("div",{key:s.id,class:"group overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-gray-200 transition hover:shadow-md"},[b(g,{href:r.route("listings.show",s.id)},{default:f(()=>[e("div",ce,[s.picture?(o(),i("img",{key:0,src:`/storage/${s.picture}`,alt:s.title,class:"h-48 w-full object-cover transition group-hover:scale-105"},null,8,me)):(o(),i("div",xe,[...t[16]||(t[16]=[e("span",{class:"text-gray-400"},"No image",-1)])]))]),e("div",pe,[e("div",ye,[e("span",fe,c(s.category.name),1),e("span",{class:h(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium",{"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":s.condition==="new","bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-600/20":s.condition==="used"}])},c(s.condition),3)]),e("h3",he,c(s.title),1),e("p",ve,c(s.description),1),e("div",be,[e("span",we," $"+c(s.price),1),e("span",ke,c(s.location),1)])])]),_:2},1032,["href"]),(_=r.$page.props.auth.user)!=null&&_.is_admin?(o(),i("div",_e,[b(g,{href:r.route("listings.edit",{listing:s.id,return_to:"home"}),class:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"},{default:f(()=>[...t[17]||(t[17]=[w(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:N(Ve=>j(s.id),["prevent"]),class:"px-3 py-1.5 text-xs font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded"}," Delete ",8,Ce)])):v("",!0)])}),128))]),l.listings.links.length>3?(o(),i("div",$e,[e("nav",Le,[(o(!0),i(p,null,k(l.listings.links,(s,_)=>(o(),C(g,{key:_,href:s.url||"#",class:h(["relative inline-flex items-center px-4 py-2 text-sm font-medium",s.active?"z-10 bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50",_===0?"rounded-l-md":"",_===l.listings.links.length-1?"rounded-r-md":"",s.url?"":"cursor-not-allowed opacity-50"]),disabled:!s.url,innerHTML:s.label},null,8,["href","class","disabled","innerHTML"]))),128))])])):v("",!0)])):(o(),i("div",je,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No listings yet",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"Be the first to create a listing!",-1)),e("div",Ae,[r.$page.props.auth.user?(o(),C(g,{key:0,href:r.route("listings.create"),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},{default:f(()=>[...t[18]||(t[18]=[w(" Create Listing ",-1)])]),_:1},8,["href"])):(o(),C(g,{key:1,href:r.route("register"),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},{default:f(()=>[...t[19]||(t[19]=[w(" Register to Post ",-1)])]),_:1},8,["href"]))])]))])])]),e("footer",Se,[e("div",Me,[e("p",Be," © "+c(new Date().getFullYear())+" PopArt Listings. All rights reserved. ",1)])])])],64)}}};export{Ne as default};
