import{r as y,u as E,a as M,c as d,b as C,w as $,d as e,e as u,o as n,F as h,f as A,t as a,g as N,h as g,i as s,v as b,j as L,k as R}from"./app-UnyQy-k-.js";import{_ as z}from"./AuthenticatedLayout-CMAlar9c.js";import"./ApplicationLogo-BBTN5_E8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex items-center justify-between"},H={class:"flex items-center gap-4"},T={class:"py-12"},G={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},J={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},K={class:"p-6"},O={key:0,class:"text-center py-8 text-gray-500"},P={key:1,class:"space-y-4"},Q={class:"flex items-center justify-between"},W={class:"flex-1"},X={class:"text-lg font-semibold text-gray-900"},Y={class:"text-sm text-gray-500"},Z={key:0,class:"text-sm text-gray-600 mt-1"},ee={class:"flex items-center gap-2"},te=["onClick"],se=["onClick"],oe=["onClick"],ie={key:0,class:"mt-4 ml-8 space-y-3"},de={class:"flex items-center justify-between bg-gray-50 p-3 rounded"},ne={class:"flex-1"},le={class:"font-medium text-gray-900"},re={class:"text-sm text-gray-500"},ae={key:0,class:"text-sm text-gray-600 mt-1"},me={class:"flex items-center gap-2"},ue=["onClick"],ce=["onClick"],ge=["onClick"],be={key:0,class:"mt-3 ml-8 space-y-2"},xe={class:"flex items-center justify-between bg-gray-100 p-2 rounded"},pe={class:"flex-1"},fe={class:"text-sm font-medium text-gray-900"},ve={class:"text-xs text-gray-500"},ye={class:"flex items-center gap-2"},he=["onClick"],_e=["onClick"],we=["onClick"],ke={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ce={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},$e={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},Ae={class:"text-lg font-medium leading-6 text-gray-900 mb-4"},je={class:"space-y-4"},Ve={key:0,class:"mt-1 text-sm text-red-600"},De={key:0,class:"mt-1 text-sm text-red-600"},Se={key:0,class:"mt-1 text-sm text-red-600"},Ee={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},Me=["disabled"],Ne={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ue={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Fe={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},qe={class:"space-y-4"},Be={key:0,class:"mt-1 text-sm text-red-600"},Le={key:0,class:"mt-1 text-sm text-red-600"},Re={key:0,class:"mt-1 text-sm text-red-600"},ze={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},Ie=["disabled"],Ke={__name:"Index",props:{categories:{type:Array,required:!0}},setup(j){const x=y(!1),p=y(!1),V=y(null),_=y(null),l=E({name:"",slug:"",description:"",parent_id:null}),i=E({name:"",slug:"",description:"",parent_id:null}),f=(r=null)=>{l.reset(),_.value=r,l.parent_id=r?r.id:null,x.value=!0},w=r=>{V.value=r,i.name=r.name,i.slug=r.slug,i.description=r.description||"",i.parent_id=r.parent_id,p.value=!0},U=()=>{l.post(route("admin.categories.store"),{onSuccess:()=>{x.value=!1,l.reset()}})},F=()=>{i.put(route("admin.categories.update",V.value.id),{onSuccess:()=>{p.value=!1,i.reset()}})},k=r=>{confirm(`Are you sure you want to delete "${r.name}"?`)&&R.delete(route("admin.categories.destroy",r.id))},D=(r,t)=>{t.slug=r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},v=r=>r.children_recursive||r.childrenRecursive||[];return(r,t)=>{const q=M("Head"),B=M("Link");return n(),d(h,null,[C(q,{title:"Manage Categories"}),C(z,null,{header:$(()=>[e("div",I,[e("div",H,[C(B,{href:r.route("admin.dashboard"),class:"text-sm text-gray-600 hover:text-gray-900"},{default:$(()=>[...t[13]||(t[13]=[L(" â† Back to Dashboard ",-1)])]),_:1},8,["href"]),t[14]||(t[14]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Manage Categories ",-1))]),e("button",{onClick:t[0]||(t[0]=o=>f()),class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Add Root Category ")])]),default:$(()=>[e("div",T,[e("div",G,[e("div",J,[e("div",K,[j.categories.length===0?(n(),d("div",O,' No categories yet. Click "Add Root Category" to create one. ')):(n(),d("div",P,[(n(!0),d(h,null,A(j.categories,o=>(n(),d("div",{key:o.id,class:"border rounded-lg p-4"},[e("div",Q,[e("div",W,[e("h3",X,a(o.name),1),e("p",Y,a(o.slug),1),o.description?(n(),d("p",Z,a(o.description),1)):u("",!0)]),e("div",ee,[e("button",{onClick:m=>f(o),class:"rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500",title:"Add subcategory"}," + Add Child ",8,te),e("button",{onClick:m=>w(o),class:"rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500"}," Edit ",8,se),e("button",{onClick:m=>k(o),class:"rounded-md bg-red-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500"}," Delete ",8,oe)])]),v(o).length>0?(n(),d("div",ie,[(n(!0),d(h,null,A(v(o),m=>(n(),d("div",{key:m.id,class:"border-l-2 border-gray-300 pl-4"},[e("div",de,[e("div",ne,[e("h4",le,a(m.name),1),e("p",re,a(m.slug),1),m.description?(n(),d("p",ae,a(m.description),1)):u("",!0)]),e("div",me,[e("button",{onClick:c=>f(m),class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-green-500",title:"Add subcategory"}," + Add Child ",8,ue),e("button",{onClick:c=>w(m),class:"rounded-md bg-blue-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-blue-500"}," Edit ",8,ce),e("button",{onClick:c=>k(m),class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-red-500"}," Delete ",8,ge)])]),v(m).length>0?(n(),d("div",be,[(n(!0),d(h,null,A(v(m),c=>(n(),d("div",{key:c.id,class:"border-l-2 border-gray-200 pl-4"},[e("div",xe,[e("div",pe,[e("h5",fe,a(c.name),1),e("p",ve,a(c.slug),1)]),e("div",ye,[e("button",{onClick:S=>f(c),class:"rounded-md bg-green-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-green-500",title:"Add subcategory"}," + ",8,he),e("button",{onClick:S=>w(c),class:"rounded-md bg-blue-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-blue-500"}," Edit ",8,_e),e("button",{onClick:S=>k(c),class:"rounded-md bg-red-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-red-500"}," Delete ",8,we)])])]))),128))])):u("",!0)]))),128))])):u("",!0)]))),128))]))])])])]),x.value?(n(),d("div",ke,[e("div",Ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[1]||(t[1]=o=>x.value=!1)}),e("div",$e,[e("form",{onSubmit:N(U,["prevent"])},[e("h3",Ae," Add "+a(_.value?"Subcategory to "+_.value.name:"Root Category"),1),e("div",je,[e("div",null,[t[15]||(t[15]=e("label",{for:"add-name",class:"block text-sm font-medium text-gray-700"},"Name *",-1)),g(e("input",{id:"add-name","onUpdate:modelValue":t[2]||(t[2]=o=>s(l).name=o),onInput:t[3]||(t[3]=o=>D(s(l).name,s(l))),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[b,s(l).name]]),s(l).errors.name?(n(),d("div",Ve,a(s(l).errors.name),1)):u("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{for:"add-slug",class:"block text-sm font-medium text-gray-700"},"Slug *",-1)),g(e("input",{id:"add-slug","onUpdate:modelValue":t[4]||(t[4]=o=>s(l).slug=o),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[b,s(l).slug]]),s(l).errors.slug?(n(),d("div",De,a(s(l).errors.slug),1)):u("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{for:"add-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),g(e("textarea",{id:"add-description","onUpdate:modelValue":t[5]||(t[5]=o=>s(l).description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[b,s(l).description]]),s(l).errors.description?(n(),d("div",Se,a(s(l).errors.description),1)):u("",!0)])]),e("div",Ee,[e("button",{type:"submit",disabled:s(l).processing,class:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2"}," Create ",8,Me),e("button",{type:"button",onClick:t[6]||(t[6]=o=>x.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0"}," Cancel ")])],32)])])])):u("",!0),p.value?(n(),d("div",Ne,[e("div",Ue,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[7]||(t[7]=o=>p.value=!1)}),e("div",Fe,[e("form",{onSubmit:N(F,["prevent"])},[t[21]||(t[21]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900 mb-4"}," Edit Category ",-1)),e("div",qe,[e("div",null,[t[18]||(t[18]=e("label",{for:"edit-name",class:"block text-sm font-medium text-gray-700"},"Name *",-1)),g(e("input",{id:"edit-name","onUpdate:modelValue":t[8]||(t[8]=o=>s(i).name=o),onInput:t[9]||(t[9]=o=>D(s(i).name,s(i))),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[b,s(i).name]]),s(i).errors.name?(n(),d("div",Be,a(s(i).errors.name),1)):u("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{for:"edit-slug",class:"block text-sm font-medium text-gray-700"},"Slug *",-1)),g(e("input",{id:"edit-slug","onUpdate:modelValue":t[10]||(t[10]=o=>s(i).slug=o),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[b,s(i).slug]]),s(i).errors.slug?(n(),d("div",Le,a(s(i).errors.slug),1)):u("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),g(e("textarea",{id:"edit-description","onUpdate:modelValue":t[11]||(t[11]=o=>s(i).description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[b,s(i).description]]),s(i).errors.description?(n(),d("div",Re,a(s(i).errors.description),1)):u("",!0)])]),e("div",ze,[e("button",{type:"submit",disabled:s(i).processing,class:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2"}," Update ",8,Ie),e("button",{type:"button",onClick:t[12]||(t[12]=o=>p.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0"}," Cancel ")])],32)])])])):u("",!0)]),_:1})],64)}}};export{Ke as default};
