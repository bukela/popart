import{u as U,a as P,c,b as i,w as f,d as s,g as q,e as L,h as v,i as o,o as m,F as y,f as $,t as h,l as x,v as E,j as F}from"./app-UnyQy-k-.js";import{_ as N}from"./AuthenticatedLayout-CMAlar9c.js";import{_ as n,b as a,a as g}from"./TextInput-Cs71FKLE.js";import{P as S}from"./PrimaryButton-CS9b6Lp-.js";import"./ApplicationLogo-BBTN5_E8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"py-12"},B={class:"mx-auto max-w-3xl sm:px-6 lg:px-8"},D={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},j=["value"],M={key:0},A=["src"],H={class:"flex items-center justify-end gap-4"},Q={__name:"Edit",props:{listing:{type:Object,required:!0},categories:{type:Array,required:!0}},setup(p){const r=p,b=new URLSearchParams(window.location.search).get("return_to"),e=U({category_id:r.listing.category_id,title:r.listing.title,description:r.listing.description,price:r.listing.price,condition:r.listing.condition,picture:null,contact_phone:r.listing.contact_phone,location:r.listing.location,_method:"PUT"}),V=()=>{const d=b?route("listings.update",{listing:r.listing.id,return_to:b}):route("listings.update",r.listing.id);e.post(d,{forceFormData:!0})},C=d=>{e.picture=d.target.files[0]},w=(d,t=0)=>{let u=[];return d.forEach(l=>{u.push({...l,level:t});const _=l.children_recursive||l.childrenRecursive||l.children||[];_.length>0&&(u=u.concat(w(_,t+1)))}),u},k=w(r.categories);return(d,t)=>{const u=P("Head");return m(),c(y,null,[i(u,{title:"Edit Listing"}),i(N,null,{header:f(()=>[...t[7]||(t[7]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Edit Listing ",-1)])]),default:f(()=>[s("div",T,[s("div",B,[s("div",D,[s("form",{onSubmit:q(V,["prevent"]),class:"p-6 space-y-6"},[s("div",null,[i(n,{for:"category_id",value:"Category *"}),v(s("select",{id:"category_id","onUpdate:modelValue":t[0]||(t[0]=l=>o(e).category_id=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[t[8]||(t[8]=s("option",{value:""},"Select a category",-1)),(m(!0),c(y,null,$(o(k),l=>(m(),c("option",{key:l.id,value:l.id},h("â€”".repeat(l.level))+" "+h(l.name),9,j))),128))],512),[[x,o(e).category_id]]),i(a,{class:"mt-2",message:o(e).errors.category_id},null,8,["message"])]),s("div",null,[i(n,{for:"title",value:"Title *"}),i(g,{id:"title",type:"text",modelValue:o(e).title,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).title=l),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(a,{class:"mt-2",message:o(e).errors.title},null,8,["message"])]),s("div",null,[i(n,{for:"description",value:"Description *"}),v(s("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=l=>o(e).description=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"4",required:""},null,512),[[E,o(e).description]]),i(a,{class:"mt-2",message:o(e).errors.description},null,8,["message"])]),s("div",null,[i(n,{for:"price",value:"Price ($) *"}),i(g,{id:"price",type:"number",step:"0.01",min:"0",modelValue:o(e).price,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).price=l),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(a,{class:"mt-2",message:o(e).errors.price},null,8,["message"])]),s("div",null,[i(n,{for:"condition",value:"Condition *"}),v(s("select",{id:"condition","onUpdate:modelValue":t[4]||(t[4]=l=>o(e).condition=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[...t[9]||(t[9]=[s("option",{value:"new"},"New",-1),s("option",{value:"used"},"Used",-1)])],512),[[x,o(e).condition]]),i(a,{class:"mt-2",message:o(e).errors.condition},null,8,["message"])]),p.listing.picture?(m(),c("div",M,[i(n,{value:"Current Picture"}),s("img",{src:`/storage/${p.listing.picture}`,alt:"Current listing picture",class:"mt-2 h-32 w-auto rounded-md"},null,8,A)])):L("",!0),s("div",null,[i(n,{for:"picture",value:"Change Picture (optional)"}),s("input",{id:"picture",type:"file",accept:"image/*",onChange:C,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),i(a,{class:"mt-2",message:o(e).errors.picture},null,8,["message"])]),s("div",null,[i(n,{for:"contact_phone",value:"Contact Phone *"}),i(g,{id:"contact_phone",type:"tel",modelValue:o(e).contact_phone,"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).contact_phone=l),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(a,{class:"mt-2",message:o(e).errors.contact_phone},null,8,["message"])]),s("div",null,[i(n,{for:"location",value:"Location *"}),i(g,{id:"location",type:"text",modelValue:o(e).location,"onUpdate:modelValue":t[6]||(t[6]=l=>o(e).location=l),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(a,{class:"mt-2",message:o(e).errors.location},null,8,["message"])]),s("div",H,[i(S,{disabled:o(e).processing},{default:f(()=>[...t[10]||(t[10]=[F(" Update Listing ",-1)])]),_:1},8,["disabled"])])],32)])])])]),_:1})],64)}}};export{Q as default};
